---
import ContentWidth from "./ContentWidth.astro";
import Title from "./Title.astro";
const jobsList = [
  {
    title:"Servitec Fácil Factura",
    image:"/images/ourJobs/facil-factura-screen.png",
    link:"https://facil-factura.com",
  },{
    title:"Korekenke",
    image:"/images/ourJobs/korekenke-screen.png",
    link:"https://korekenke.mil.pe",
  },{
    title:"La Vid",
    image:"/images/ourJobs/lavid.png",
    link:"https://lavid.life/",
  },{
    title:"Circulo Militar STSBO",
    image:"/images/ourJobs/circulo-militar.png",
    link:"https://www.circulomilitar-sts.com",
  },
];
---

<section id="jobs" class="py-20 bg-neutral-900 text-white">
  <ContentWidth>
    <div class="mb-6">
      <h1 class="text-4xl sm:text-5xl md:text-6xl font-extrabold leading-tight mb-10">
        <span class="block bg-clip-text text-transparent bg-gradient-to-r from-yellow-400 to-yellow-200 text-center">Nuestros Trabajos</span>
      </h1>
      <p class="mt-3 max-w-2xl text-lg text-neutral-300">Proyectos reales, hechos a medida. Explora trabajos que combinan rendimiento, diseño y escalabilidad.</p>
    </div>

    <div class="grid gap-6 md:gap-8 grid-cols-1 md:grid-cols-2">
      {jobsList.map((job, i) => (
          <article
              class="job-card relative rounded-3xl overflow-hidden group will-change-transform"
              style={`transition-delay: ${i * 80}ms`}
              role="article"
              aria-label={job.title}
              tabindex="0"
          >
            <figure class="job-figure relative aspect-[16/10] md:aspect-[16/9] w-full overflow-hidden bg-black rounded-3xl">
              <img
                  src={job.image}
                  alt={job.title}
                  loading={i === 0 ? 'eager' : 'lazy'}
                  class="job-image w-full h-full object-cover transition-transform duration-700 will-change-transform"
              />

              <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent pointer-events-none transition-opacity duration-400 group-hover:from-black/80"></div>

              <div aria-hidden="true" class="absolute -right-10 -top-10 w-36 h-36 rounded-full bg-gradient-to-br from-yellow-400/20 to-yellow-500/6 pointer-events-none blur-[10px]"></div>

              <div class="absolute top-4 right-4 flex items-center gap-3 z-10">
                <a
                    href={job.link}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="inline-flex items-center justify-center w-12 h-12 rounded-xl bg-yellow-400 text-black shadow-lg hover:scale-105 focus:scale-105 transform transition"
                    aria-label={`Abrir ${job.title} en nueva pestaña`}
                    title={`Abrir ${job.title}`}
                >
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M18 13v6a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 3h6v6" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M10 14L21 3" />
                  </svg>
                </a>
              </div>

              <figcaption class="absolute left-0 bottom-0 w-full z-10">
                <div class="backdrop-blur-md bg-black/40 px-6 py-4 flex items-center justify-between gap-4">
                  <div class="flex items-center gap-4">
                    <div>
                      <h3 class="text-white text-lg font-semibold leading-tight truncate">{job.title}</h3>
                      <p class="text-xs text-neutral-300 mt-1 hidden md:block">Proyecto real • Diseño & Desarrollo</p>
                    </div>
                  </div>

                  <div class="hidden md:flex items-center gap-3">
                  <span class="inline-flex items-center gap-2 text-xs font-medium text-yellow-300 bg-yellow-400/6 px-3 py-1 rounded-full border border-yellow-500/6">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-3 h-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" />
                    </svg>
                    Sitio en vivo
                  </span>
                    <a href={job.link} target="_blank" rel="noopener noreferrer" class="text-sm font-semibold text-yellow-300 hover:text-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-400/30 rounded px-3 py-2 bg-yellow-400/6 border border-yellow-500/6">Visitar</a>
                  </div>
                </div>
              </figcaption>
            </figure>
          </article>
      ))}
    </div>
  </ContentWidth>

  <style>
    :root { --header-height: var(--header-height, 0px); }

    .job-card {
      transition: transform .45s cubic-bezier(.2,.9,.3,1), box-shadow .35s ease, filter .35s ease;
      will-change: transform;
      box-shadow: 0 12px 40px rgba(0,0,0,0.6);
    }
    .job-card:focus,
    .job-card:focus-visible,
    .job-card:hover {
      transform: translateY(-10px) scale(1.01);
      box-shadow: 0 30px 90px rgba(20, 20, 20, 0.7), 0 0 0 6px rgba(250, 204, 21, 0.06);
    }

    .job-image {
      transform-origin: center;
      transition: transform .9s cubic-bezier(.2,.9,.3,1), filter .5s ease;
    }
    .job-card:hover .job-image,
    .job-card:focus .job-image {
      transform: scale(1.08) rotate(-0.6deg);
      filter: contrast(1.08) saturate(1.03);
    }

    @media (max-width: 768px) {
      figcaption div.backdrop-blur-md { padding-left: 1rem; padding-right: 1rem; }
      .job-card:focus, .job-card:hover { transform: none; box-shadow: 0 12px 36px rgba(0,0,0,0.6); }
    }

    .job-card:focus { outline: none; }
    .job-card:focus-visible { box-shadow: 0 30px 90px rgba(20, 20, 20, 0.7), 0 0 0 6px rgba(250, 204, 21, 0.08); }

    .job-card { opacity: 0; transform: translateY(18px) scale(.995); transition-property: opacity, transform, box-shadow; }
    .is-revealed .job-card { opacity: 1; transform: translateY(0) scale(1); }

    @media (max-width: 420px) {
      .job-card { border-radius: 1rem; }
      .job-figure { border-radius: 1rem; }
    }
  </style>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const section = document.getElementById('jobs');
      if (!section) return;
      if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
        section.classList.add('is-revealed');
        return;
      }
      const io = new IntersectionObserver((entries, obs) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            section.classList.add('is-revealed');
            obs.disconnect();
          }
        });
      }, { threshold: 0.15 });
      io.observe(section);
    });
  </script>
</section>
